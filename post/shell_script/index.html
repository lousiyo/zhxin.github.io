<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Shellç¼–ç¨‹åŸºç¡€ | zhxin.xyz</title><meta name=keywords content="shell"><meta name=description content="å˜é‡ è„šæœ¬å¼€å¤´ä½¿ç”¨#!/bin/bashæŒ‡å®šè¦ä½¿ç”¨çš„shell,shellä¼šé€šè¿‡PATHç¯å¢ƒå˜é‡æ¥æŸ¥æ‰¾è„šæœ¬ä¸­ä½¿ç”¨çš„å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨echo $PATHæ¥çœ‹ä¸‹è„šæœ¬ä¼šåœ¨å“ªäº›ç›®å½•ä¸‹æŸ¥æ‰¾å‘½ä»¤ï¼Œå¦‚æœè„šæœ¬ä¸­æ‰§è¡Œçš„å‘½ä»¤æ²¡æœ‰åœ¨PATHç¯å¢ƒå˜é‡ä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç»å¯¹æˆ–ç›¸å¯¹è·¯å¾„æ¥å¼•ç”¨.
åœ¨è„šæœ¬ä¸­å¯ä»¥ä½¿ç”¨shellç»´æŠ¤çš„ç¯å¢ƒå˜é‡ä¹Ÿå¯ä»¥å®šä¹‰å’Œä½¿ç”¨è‡ªå·±çš„ç”¨æˆ·å˜é‡.
èµ‹å€¼ç­‰å·ä¸¤è¾¹ä¸èƒ½å­˜åœ¨ç©ºæ ¼
ç¯å¢ƒå˜é‡ï¼š
å¯ä»¥ä½¿ç”¨setå‘½ä»¤æŸ¥çœ‹å½“å‰ç¯å¢ƒå˜é‡åˆ—è¡¨,ä¾‹å¦‚$HOMEã€$HOSTNAMEã€$USERç­‰;
ç”¨æˆ·å˜é‡ï¼š
ç”±å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ç»„æˆï¼Œé•¿åº¦ä¸è¶…è¿‡äºŒåï¼ŒåŒºåˆ†å¤§å°å†™ï¼Œå˜é‡ã€ç­‰å·ã€å€¼ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œåœ¨shellè„šæœ¬ç»“æŸæ—¶ä¼šè¢«åˆ é™¤æ‰ï¼Œä½¿ç”¨ç¾å…ƒç¬¦å·å¼•ç”¨ï¼Œä¾‹å¦‚name=&#34;test&#34;ã€‚
ä½¿ç”¨ç”¨æˆ·å˜é‡ä¿å­˜å‘½ä»¤æ‰§è¡Œç»“æœï¼štesting=$(date)
ç‰¹æ®Šå‚æ•°å˜é‡
å‚æ•° æè¿° $1 $2	| å…¥å‚| | ï¿½ï¿½æ•°ä¸ªæ•°| | ï¿½ï¿½å‚åˆ—è¡¨ï¼Œå°†æ‰€æœ‰å‚æ•°å½“ä½œå•ä¸ªå‚æ•°| | ï¿½ï¿½å‚åˆ—è¡¨ï¼Œå•ç‹¬å¤„ç†æ¯ä¸ªå‚| é‡å®šå‘è¾“å…¥è¾“å‡º è¾“å‡ºé‡å®šå‘: > è¿½åŠ ï¼š>>
è¾“å…¥é‡å®šå‘: < åœ¨è„šæœ¬ä¸­ä½¿ç”¨< > éœ€è¦è¿›è¡Œè½¬ä¹‰\< \>
å†…è”è¾“å…¥é‡å®šå‘ï¼š
command << marker content marker # ä¾‹å¦‚ï¼š wc -l <<EOF echo &#34;aaa&#34; echo &#34;BBB&#34; EOF å†…è”é‡å®šå‘åˆ°æ–‡ä»¶
cat >> demo.txt <<EOF some content EOF æ–‡ä»¶æè¿°ç¬¦ ç¼©å†™ æè¿° 0 STDIN æ ‡å‡†è¾“å…¥ 1 STDOUT æ ‡å‡†è¾“å‡º 2 STDERR æ ‡å‡†é”™è¯¯ &> ç¬¦å·ä¼šå°†æ‰€æœ‰è¾“å‡ºé‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶å†…"><meta name=author content><link rel=canonical href=https://zhxin.xyz/post/shell_script/><link crossorigin=anonymous href=/assets/css/stylesheet.3613efbd0b1772781e8f49935e973cae632a7f61471c05b17be155505ccf87b5.css integrity="sha256-NhPvvQsXcngej0mTXpc8rmMqf2FHHAWxe+FVUFzPh7U=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://zhxin.xyz/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://zhxin.xyz/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://zhxin.xyz/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://zhxin.xyz/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://zhxin.xyz/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-109514401-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="Shellç¼–ç¨‹åŸºç¡€"><meta property="og:description" content="å˜é‡ è„šæœ¬å¼€å¤´ä½¿ç”¨#!/bin/bashæŒ‡å®šè¦ä½¿ç”¨çš„shell,shellä¼šé€šè¿‡PATHç¯å¢ƒå˜é‡æ¥æŸ¥æ‰¾è„šæœ¬ä¸­ä½¿ç”¨çš„å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨echo $PATHæ¥çœ‹ä¸‹è„šæœ¬ä¼šåœ¨å“ªäº›ç›®å½•ä¸‹æŸ¥æ‰¾å‘½ä»¤ï¼Œå¦‚æœè„šæœ¬ä¸­æ‰§è¡Œçš„å‘½ä»¤æ²¡æœ‰åœ¨PATHç¯å¢ƒå˜é‡ä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç»å¯¹æˆ–ç›¸å¯¹è·¯å¾„æ¥å¼•ç”¨.
åœ¨è„šæœ¬ä¸­å¯ä»¥ä½¿ç”¨shellç»´æŠ¤çš„ç¯å¢ƒå˜é‡ä¹Ÿå¯ä»¥å®šä¹‰å’Œä½¿ç”¨è‡ªå·±çš„ç”¨æˆ·å˜é‡.
èµ‹å€¼ç­‰å·ä¸¤è¾¹ä¸èƒ½å­˜åœ¨ç©ºæ ¼
ç¯å¢ƒå˜é‡ï¼š
å¯ä»¥ä½¿ç”¨setå‘½ä»¤æŸ¥çœ‹å½“å‰ç¯å¢ƒå˜é‡åˆ—è¡¨,ä¾‹å¦‚$HOMEã€$HOSTNAMEã€$USERç­‰;
ç”¨æˆ·å˜é‡ï¼š
ç”±å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ç»„æˆï¼Œé•¿åº¦ä¸è¶…è¿‡äºŒåï¼ŒåŒºåˆ†å¤§å°å†™ï¼Œå˜é‡ã€ç­‰å·ã€å€¼ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œåœ¨shellè„šæœ¬ç»“æŸæ—¶ä¼šè¢«åˆ é™¤æ‰ï¼Œä½¿ç”¨ç¾å…ƒç¬¦å·å¼•ç”¨ï¼Œä¾‹å¦‚name=&#34;test&#34;ã€‚
ä½¿ç”¨ç”¨æˆ·å˜é‡ä¿å­˜å‘½ä»¤æ‰§è¡Œç»“æœï¼štesting=$(date)
ç‰¹æ®Šå‚æ•°å˜é‡
å‚æ•° æè¿° $1 $2	| å…¥å‚| | ï¿½ï¿½æ•°ä¸ªæ•°| | ï¿½ï¿½å‚åˆ—è¡¨ï¼Œå°†æ‰€æœ‰å‚æ•°å½“ä½œå•ä¸ªå‚æ•°| | ï¿½ï¿½å‚åˆ—è¡¨ï¼Œå•ç‹¬å¤„ç†æ¯ä¸ªå‚| é‡å®šå‘è¾“å…¥è¾“å‡º è¾“å‡ºé‡å®šå‘: > è¿½åŠ ï¼š>>
è¾“å…¥é‡å®šå‘: < åœ¨è„šæœ¬ä¸­ä½¿ç”¨< > éœ€è¦è¿›è¡Œè½¬ä¹‰\< \>
å†…è”è¾“å…¥é‡å®šå‘ï¼š
command << marker content marker # ä¾‹å¦‚ï¼š wc -l <<EOF echo &#34;aaa&#34; echo &#34;BBB&#34; EOF å†…è”é‡å®šå‘åˆ°æ–‡ä»¶
cat >> demo.txt <<EOF some content EOF æ–‡ä»¶æè¿°ç¬¦ ç¼©å†™ æè¿° 0 STDIN æ ‡å‡†è¾“å…¥ 1 STDOUT æ ‡å‡†è¾“å‡º 2 STDERR æ ‡å‡†é”™è¯¯ &> ç¬¦å·ä¼šå°†æ‰€æœ‰è¾“å‡ºé‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶å†…"><meta property="og:type" content="article"><meta property="og:url" content="https://zhxin.xyz/post/shell_script/"><meta property="article:section" content="post"><meta property="article:published_time" content="2021-06-28T22:49:38+08:00"><meta property="article:modified_time" content="2021-06-28T22:49:38+08:00"><meta property="og:site_name" content="zhxin"><meta name=twitter:card content="summary"><meta name=twitter:title content="Shellç¼–ç¨‹åŸºç¡€"><meta name=twitter:description content="å˜é‡ è„šæœ¬å¼€å¤´ä½¿ç”¨#!/bin/bashæŒ‡å®šè¦ä½¿ç”¨çš„shell,shellä¼šé€šè¿‡PATHç¯å¢ƒå˜é‡æ¥æŸ¥æ‰¾è„šæœ¬ä¸­ä½¿ç”¨çš„å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨echo $PATHæ¥çœ‹ä¸‹è„šæœ¬ä¼šåœ¨å“ªäº›ç›®å½•ä¸‹æŸ¥æ‰¾å‘½ä»¤ï¼Œå¦‚æœè„šæœ¬ä¸­æ‰§è¡Œçš„å‘½ä»¤æ²¡æœ‰åœ¨PATHç¯å¢ƒå˜é‡ä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç»å¯¹æˆ–ç›¸å¯¹è·¯å¾„æ¥å¼•ç”¨.
åœ¨è„šæœ¬ä¸­å¯ä»¥ä½¿ç”¨shellç»´æŠ¤çš„ç¯å¢ƒå˜é‡ä¹Ÿå¯ä»¥å®šä¹‰å’Œä½¿ç”¨è‡ªå·±çš„ç”¨æˆ·å˜é‡.
èµ‹å€¼ç­‰å·ä¸¤è¾¹ä¸èƒ½å­˜åœ¨ç©ºæ ¼
ç¯å¢ƒå˜é‡ï¼š
å¯ä»¥ä½¿ç”¨setå‘½ä»¤æŸ¥çœ‹å½“å‰ç¯å¢ƒå˜é‡åˆ—è¡¨,ä¾‹å¦‚$HOMEã€$HOSTNAMEã€$USERç­‰;
ç”¨æˆ·å˜é‡ï¼š
ç”±å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ç»„æˆï¼Œé•¿åº¦ä¸è¶…è¿‡äºŒåï¼ŒåŒºåˆ†å¤§å°å†™ï¼Œå˜é‡ã€ç­‰å·ã€å€¼ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œåœ¨shellè„šæœ¬ç»“æŸæ—¶ä¼šè¢«åˆ é™¤æ‰ï¼Œä½¿ç”¨ç¾å…ƒç¬¦å·å¼•ç”¨ï¼Œä¾‹å¦‚name=&#34;test&#34;ã€‚
ä½¿ç”¨ç”¨æˆ·å˜é‡ä¿å­˜å‘½ä»¤æ‰§è¡Œç»“æœï¼štesting=$(date)
ç‰¹æ®Šå‚æ•°å˜é‡
å‚æ•° æè¿° $1 $2	| å…¥å‚| | ï¿½ï¿½æ•°ä¸ªæ•°| | ï¿½ï¿½å‚åˆ—è¡¨ï¼Œå°†æ‰€æœ‰å‚æ•°å½“ä½œå•ä¸ªå‚æ•°| | ï¿½ï¿½å‚åˆ—è¡¨ï¼Œå•ç‹¬å¤„ç†æ¯ä¸ªå‚| é‡å®šå‘è¾“å…¥è¾“å‡º è¾“å‡ºé‡å®šå‘: > è¿½åŠ ï¼š>>
è¾“å…¥é‡å®šå‘: < åœ¨è„šæœ¬ä¸­ä½¿ç”¨< > éœ€è¦è¿›è¡Œè½¬ä¹‰\< \>
å†…è”è¾“å…¥é‡å®šå‘ï¼š
command << marker content marker # ä¾‹å¦‚ï¼š wc -l <<EOF echo &#34;aaa&#34; echo &#34;BBB&#34; EOF å†…è”é‡å®šå‘åˆ°æ–‡ä»¶
cat >> demo.txt <<EOF some content EOF æ–‡ä»¶æè¿°ç¬¦ ç¼©å†™ æè¿° 0 STDIN æ ‡å‡†è¾“å…¥ 1 STDOUT æ ‡å‡†è¾“å‡º 2 STDERR æ ‡å‡†é”™è¯¯ &> ç¬¦å·ä¼šå°†æ‰€æœ‰è¾“å‡ºé‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶å†…"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"æ‰€æœ‰æ–‡ç« ","item":"https://zhxin.xyz/post/"},{"@type":"ListItem","position":2,"name":"Shellç¼–ç¨‹åŸºç¡€","item":"https://zhxin.xyz/post/shell_script/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Shellç¼–ç¨‹åŸºç¡€","name":"Shellç¼–ç¨‹åŸºç¡€","description":"å˜é‡ è„šæœ¬å¼€å¤´ä½¿ç”¨#!/bin/bashæŒ‡å®šè¦ä½¿ç”¨çš„shell,shellä¼šé€šè¿‡PATHç¯å¢ƒå˜é‡æ¥æŸ¥æ‰¾è„šæœ¬ä¸­ä½¿ç”¨çš„å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨echo $PATHæ¥çœ‹ä¸‹è„šæœ¬ä¼šåœ¨å“ªäº›ç›®å½•ä¸‹æŸ¥æ‰¾å‘½ä»¤ï¼Œå¦‚æœè„šæœ¬ä¸­æ‰§è¡Œçš„å‘½ä»¤æ²¡æœ‰åœ¨PATHç¯å¢ƒå˜é‡ä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç»å¯¹æˆ–ç›¸å¯¹è·¯å¾„æ¥å¼•ç”¨.\nåœ¨è„šæœ¬ä¸­å¯ä»¥ä½¿ç”¨shellç»´æŠ¤çš„ç¯å¢ƒå˜é‡ä¹Ÿå¯ä»¥å®šä¹‰å’Œä½¿ç”¨è‡ªå·±çš„ç”¨æˆ·å˜é‡.\nèµ‹å€¼ç­‰å·ä¸¤è¾¹ä¸èƒ½å­˜åœ¨ç©ºæ ¼\nç¯å¢ƒå˜é‡ï¼š\nå¯ä»¥ä½¿ç”¨setå‘½ä»¤æŸ¥çœ‹å½“å‰ç¯å¢ƒå˜é‡åˆ—è¡¨,ä¾‹å¦‚$HOMEã€$HOSTNAMEã€$USERç­‰;\nç”¨æˆ·å˜é‡ï¼š\nç”±å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ç»„æˆï¼Œé•¿åº¦ä¸è¶…è¿‡äºŒåï¼ŒåŒºåˆ†å¤§å°å†™ï¼Œå˜é‡ã€ç­‰å·ã€å€¼ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œåœ¨shellè„šæœ¬ç»“æŸæ—¶ä¼šè¢«åˆ é™¤æ‰ï¼Œä½¿ç”¨ç¾å…ƒç¬¦å·å¼•ç”¨ï¼Œä¾‹å¦‚name=\u0026quot;test\u0026quot;ã€‚\nä½¿ç”¨ç”¨æˆ·å˜é‡ä¿å­˜å‘½ä»¤æ‰§è¡Œç»“æœï¼štesting=$(date)\nç‰¹æ®Šå‚æ•°å˜é‡\nå‚æ•° æè¿° $1 $2\t| å…¥å‚| | ï¿½ï¿½æ•°ä¸ªæ•°| | ï¿½ï¿½å‚åˆ—è¡¨ï¼Œå°†æ‰€æœ‰å‚æ•°å½“ä½œå•ä¸ªå‚æ•°| | ï¿½ï¿½å‚åˆ—è¡¨ï¼Œå•ç‹¬å¤„ç†æ¯ä¸ªå‚| é‡å®šå‘è¾“å…¥è¾“å‡º è¾“å‡ºé‡å®šå‘: \u0026gt; è¿½åŠ ï¼š\u0026gt;\u0026gt;\nè¾“å…¥é‡å®šå‘: \u0026lt; åœ¨è„šæœ¬ä¸­ä½¿ç”¨\u0026lt; \u0026gt; éœ€è¦è¿›è¡Œè½¬ä¹‰\\\u0026lt; \\\u0026gt;\nå†…è”è¾“å…¥é‡å®šå‘ï¼š\ncommand \u0026lt;\u0026lt; marker content marker # ä¾‹å¦‚ï¼š wc -l \u0026lt;\u0026lt;EOF echo \u0026#34;aaa\u0026#34; echo \u0026#34;BBB\u0026#34; EOF å†…è”é‡å®šå‘åˆ°æ–‡ä»¶\ncat \u0026gt;\u0026gt; demo.txt \u0026lt;\u0026lt;EOF some content EOF æ–‡ä»¶æè¿°ç¬¦ ç¼©å†™ æè¿° 0 STDIN æ ‡å‡†è¾“å…¥ 1 STDOUT æ ‡å‡†è¾“å‡º 2 STDERR æ ‡å‡†é”™è¯¯ \u0026amp;\u0026gt; ç¬¦å·ä¼šå°†æ‰€æœ‰è¾“å‡ºé‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶å†…","keywords":["shell"],"articleBody":"å˜é‡ è„šæœ¬å¼€å¤´ä½¿ç”¨#!/bin/bashæŒ‡å®šè¦ä½¿ç”¨çš„shell,shellä¼šé€šè¿‡PATHç¯å¢ƒå˜é‡æ¥æŸ¥æ‰¾è„šæœ¬ä¸­ä½¿ç”¨çš„å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨echo $PATHæ¥çœ‹ä¸‹è„šæœ¬ä¼šåœ¨å“ªäº›ç›®å½•ä¸‹æŸ¥æ‰¾å‘½ä»¤ï¼Œå¦‚æœè„šæœ¬ä¸­æ‰§è¡Œçš„å‘½ä»¤æ²¡æœ‰åœ¨PATHç¯å¢ƒå˜é‡ä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç»å¯¹æˆ–ç›¸å¯¹è·¯å¾„æ¥å¼•ç”¨.\nåœ¨è„šæœ¬ä¸­å¯ä»¥ä½¿ç”¨shellç»´æŠ¤çš„ç¯å¢ƒå˜é‡ä¹Ÿå¯ä»¥å®šä¹‰å’Œä½¿ç”¨è‡ªå·±çš„ç”¨æˆ·å˜é‡.\nèµ‹å€¼ç­‰å·ä¸¤è¾¹ä¸èƒ½å­˜åœ¨ç©ºæ ¼\nç¯å¢ƒå˜é‡ï¼š\nå¯ä»¥ä½¿ç”¨setå‘½ä»¤æŸ¥çœ‹å½“å‰ç¯å¢ƒå˜é‡åˆ—è¡¨,ä¾‹å¦‚$HOMEã€$HOSTNAMEã€$USERç­‰;\nç”¨æˆ·å˜é‡ï¼š\nç”±å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ç»„æˆï¼Œé•¿åº¦ä¸è¶…è¿‡äºŒåï¼ŒåŒºåˆ†å¤§å°å†™ï¼Œå˜é‡ã€ç­‰å·ã€å€¼ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œåœ¨shellè„šæœ¬ç»“æŸæ—¶ä¼šè¢«åˆ é™¤æ‰ï¼Œä½¿ç”¨ç¾å…ƒç¬¦å·å¼•ç”¨ï¼Œä¾‹å¦‚name=\"test\"ã€‚\nä½¿ç”¨ç”¨æˆ·å˜é‡ä¿å­˜å‘½ä»¤æ‰§è¡Œç»“æœï¼štesting=$(date)\nç‰¹æ®Šå‚æ•°å˜é‡\nå‚æ•° æè¿° $1 $2\t| å…¥å‚| | ï¿½ï¿½æ•°ä¸ªæ•°| | ï¿½ï¿½å‚åˆ—è¡¨ï¼Œå°†æ‰€æœ‰å‚æ•°å½“ä½œå•ä¸ªå‚æ•°| | ï¿½ï¿½å‚åˆ—è¡¨ï¼Œå•ç‹¬å¤„ç†æ¯ä¸ªå‚| é‡å®šå‘è¾“å…¥è¾“å‡º è¾“å‡ºé‡å®šå‘: \u003e è¿½åŠ ï¼š\u003e\u003e\nè¾“å…¥é‡å®šå‘: \u003c åœ¨è„šæœ¬ä¸­ä½¿ç”¨\u003c \u003e éœ€è¦è¿›è¡Œè½¬ä¹‰\\\u003c \\\u003e\nå†…è”è¾“å…¥é‡å®šå‘ï¼š\ncommand \u003c\u003c marker content marker # ä¾‹å¦‚ï¼š wc -l \u003c","wordCount":"586","inLanguage":"zh","datePublished":"2021-06-28T22:49:38+08:00","dateModified":"2021-06-28T22:49:38+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://zhxin.xyz/post/shell_script/"},"publisher":{"@type":"Organization","name":"zhxin.xyz","logo":{"@type":"ImageObject","url":"https://zhxin.xyz/%3Clink%20/%20abs%20url%3E"}}}</script></head><body class=dark id=top><header class=header><nav class=nav><div class=logo><a href=https://zhxin.xyz/ accesskey=h title="ä¸»é¡µ (Alt + H)"><img src=https://zhxin.xyz/apple-touch-icon.png alt aria-label=logo height=35>ä¸»é¡µ</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://zhxin.xyz/post/ title=æ‰€æœ‰æ–‡ç« ><span>æ‰€æœ‰æ–‡ç« </span></a></li><li><a href=https://zhxin.xyz/categories/ title=ç±»åˆ«><span>ç±»åˆ«</span></a></li><li><a href=https://zhxin.xyz/tags/ title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://zhxin.xyz/archives/ title=å½’æ¡£><span>å½’æ¡£</span></a></li><li><a href=https://zhxin.xyz/search/ title="æœç´¢ (Alt + /)" accesskey=/><span>æœç´¢</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Shellç¼–ç¨‹åŸºç¡€</h1><div class=post-meta><span title='2021-06-28 22:49:38 +0800 CST'>2021-06-28</span></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>ç›®å½•</span></summary><div class=inner><ul><li><a href=#%e5%8f%98%e9%87%8f aria-label=å˜é‡>å˜é‡</a></li><li><a href=#%e9%87%8d%e5%ae%9a%e5%90%91%e8%be%93%e5%85%a5%e8%be%93%e5%87%ba aria-label=é‡å®šå‘è¾“å…¥è¾“å‡º>é‡å®šå‘è¾“å…¥è¾“å‡º</a></li><li><a href=#%e8%84%9a%e6%9c%ac%e4%b8%ad%e6%89%a7%e8%a1%8c%e6%95%b0%e5%ad%a6%e8%bf%90%e7%ae%97 aria-label=è„šæœ¬ä¸­æ‰§è¡Œæ•°å­¦è¿ç®—>è„šæœ¬ä¸­æ‰§è¡Œæ•°å­¦è¿ç®—</a></li><li><a href=#%e9%80%80%e5%87%ba%e8%84%9a%e6%9c%ac aria-label=é€€å‡ºè„šæœ¬>é€€å‡ºè„šæœ¬</a></li><li><a href=#%e7%bb%93%e6%9e%84%e5%8c%96%e5%91%bd%e4%bb%a4 aria-label=ç»“æ„åŒ–å‘½ä»¤>ç»“æ„åŒ–å‘½ä»¤</a><ul><li><a href=#if%e8%af%ad%e5%8f%a5 aria-label=ifè¯­å¥>ifè¯­å¥</a></li><li><a href=#%e6%9d%a1%e4%bb%b6%e6%b5%8b%e8%af%95 aria-label=æ¡ä»¶æµ‹è¯•>æ¡ä»¶æµ‹è¯•</a></li><li><a href=#case%e8%af%ad%e5%8f%a5 aria-label=caseè¯­å¥>caseè¯­å¥</a></li><li><a href=#for%e8%af%ad%e5%8f%a5 aria-label=forè¯­å¥>forè¯­å¥</a></li><li><a href=#while%e8%af%ad%e5%8f%a5 aria-label=whileè¯­å¥>whileè¯­å¥</a></li></ul></li><li><a href=#%e5%a4%84%e7%90%86%e7%94%a8%e6%88%b7%e8%be%93%e5%85%a5 aria-label=å¤„ç†ç”¨æˆ·è¾“å…¥>å¤„ç†ç”¨æˆ·è¾“å…¥</a></li><li><a href=#%e4%bd%bf%e7%94%a8%e4%b8%b4%e6%97%b6%e6%96%87%e4%bb%b6 aria-label=ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶>ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶</a></li><li><a href=#%e6%8e%a7%e5%88%b6%e8%84%9a%e6%9c%ac aria-label=æ§åˆ¶è„šæœ¬>æ§åˆ¶è„šæœ¬</a><ul><li><a href=#shell%e5%87%bd%e6%95%b0 aria-label=shellå‡½æ•°>shellå‡½æ•°</a></li></ul></li><li><a href=#%e5%b7%a5%e5%85%b7%e6%8e%a8%e8%8d%90 aria-label=å·¥å…·æ¨è>å·¥å…·æ¨è</a></li></ul></div></details></div><div class=post-content><h2 id=å˜é‡>å˜é‡<a hidden class=anchor aria-hidden=true href=#å˜é‡>#</a></h2><p>è„šæœ¬å¼€å¤´ä½¿ç”¨<code>#!/bin/bash</code>æŒ‡å®šè¦ä½¿ç”¨çš„shell,shellä¼šé€šè¿‡PATHç¯å¢ƒå˜é‡æ¥æŸ¥æ‰¾è„šæœ¬ä¸­ä½¿ç”¨çš„å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨<code>echo $PATH</code>æ¥çœ‹ä¸‹è„šæœ¬ä¼šåœ¨å“ªäº›ç›®å½•ä¸‹æŸ¥æ‰¾å‘½ä»¤ï¼Œå¦‚æœè„šæœ¬ä¸­æ‰§è¡Œçš„å‘½ä»¤æ²¡æœ‰åœ¨PATHç¯å¢ƒå˜é‡ä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç»å¯¹æˆ–ç›¸å¯¹è·¯å¾„æ¥å¼•ç”¨.<br>åœ¨è„šæœ¬ä¸­å¯ä»¥ä½¿ç”¨shellç»´æŠ¤çš„ç¯å¢ƒå˜é‡ä¹Ÿå¯ä»¥å®šä¹‰å’Œä½¿ç”¨è‡ªå·±çš„ç”¨æˆ·å˜é‡.<br>èµ‹å€¼ç­‰å·ä¸¤è¾¹ä¸èƒ½å­˜åœ¨ç©ºæ ¼</p><ul><li><p>ç¯å¢ƒå˜é‡ï¼š<br>å¯ä»¥ä½¿ç”¨setå‘½ä»¤æŸ¥çœ‹å½“å‰ç¯å¢ƒå˜é‡åˆ—è¡¨,ä¾‹å¦‚<code>$HOME</code>ã€<code>$HOSTNAME</code>ã€<code>$USER</code>ç­‰;</p></li><li><p>ç”¨æˆ·å˜é‡ï¼š<br>ç”±å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ç»„æˆï¼Œé•¿åº¦ä¸è¶…è¿‡äºŒåï¼ŒåŒºåˆ†å¤§å°å†™ï¼Œå˜é‡ã€ç­‰å·ã€å€¼ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œåœ¨shellè„šæœ¬ç»“æŸæ—¶ä¼šè¢«åˆ é™¤æ‰ï¼Œä½¿ç”¨ç¾å…ƒç¬¦å·å¼•ç”¨ï¼Œä¾‹å¦‚<code>name="test"</code>ã€‚<br>ä½¿ç”¨ç”¨æˆ·å˜é‡ä¿å­˜å‘½ä»¤æ‰§è¡Œç»“æœï¼š<code>testing=$(date)</code></p></li><li><p>ç‰¹æ®Šå‚æ•°å˜é‡</p><table><thead><tr><th style=text-align:left>å‚æ•°</th><th style=text-align:left>æè¿°</th></tr></thead><tbody><tr><td style=text-align:left>$1 $2 |</td><td style=text-align:left>å…¥å‚|</td></tr><tr><td style=text-align:left>|</td><td style=text-align:left>‚æ•°ä¸ªæ•°|</td></tr><tr><td style=text-align:left>|</td><td style=text-align:left>…¥å‚åˆ—è¡¨ï¼Œå°†æ‰€æœ‰å‚æ•°å½“ä½œå•ä¸ªå‚æ•°|</td></tr><tr><td style=text-align:left>|</td><td style=text-align:left>…¥å‚åˆ—è¡¨ï¼Œå•ç‹¬å¤„ç†æ¯ä¸ªå‚|</td></tr></tbody></table></li></ul><h2 id=é‡å®šå‘è¾“å…¥è¾“å‡º>é‡å®šå‘è¾“å…¥è¾“å‡º<a hidden class=anchor aria-hidden=true href=#é‡å®šå‘è¾“å…¥è¾“å‡º>#</a></h2><p>è¾“å‡ºé‡å®šå‘: <code>></code> è¿½åŠ ï¼š<code>>></code><br>è¾“å…¥é‡å®šå‘: <code>&lt;</code>
åœ¨è„šæœ¬ä¸­ä½¿ç”¨<code>&lt; ></code> éœ€è¦è¿›è¡Œè½¬ä¹‰<code>\&lt; \></code><br>å†…è”è¾“å…¥é‡å®šå‘ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>command</span> <span class=s>&lt;&lt; marker  
</span></span></span><span class=line><span class=cl><span class=s> content  
</span></span></span><span class=line><span class=cl><span class=s>marker</span>  
</span></span><span class=line><span class=cl><span class=c1># ä¾‹å¦‚ï¼š  </span>
</span></span><span class=line><span class=cl>wc -l <span class=s>&lt;&lt;EOF  
</span></span></span><span class=line><span class=cl><span class=s>echo &#34;aaa&#34;  
</span></span></span><span class=line><span class=cl><span class=s>echo &#34;BBB&#34;  
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>  
</span></span></code></pre></div><p>å†…è”é‡å®šå‘åˆ°æ–‡ä»¶</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat &gt;&gt; demo.txt <span class=s>&lt;&lt;EOF  
</span></span></span><span class=line><span class=cl><span class=s> some content  
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>  
</span></span></code></pre></div><table><thead><tr><th style=text-align:left>æ–‡ä»¶æè¿°ç¬¦</th><th style=text-align:left>ç¼©å†™</th><th style=text-align:left>æè¿°</th></tr></thead><tbody><tr><td style=text-align:left>0</td><td style=text-align:left>STDIN</td><td style=text-align:left>æ ‡å‡†è¾“å…¥</td></tr><tr><td style=text-align:left>1</td><td style=text-align:left>STDOUT</td><td style=text-align:left>æ ‡å‡†è¾“å‡º</td></tr><tr><td style=text-align:left>2</td><td style=text-align:left>STDERR</td><td style=text-align:left>æ ‡å‡†é”™è¯¯</td></tr></tbody></table><p><code>&></code> ç¬¦å·ä¼šå°†æ‰€æœ‰è¾“å‡ºé‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶å†…<br><code>exec 1>testout</code> åœ¨è„šæœ¬ä¸­å°†STDOUTæ°¸ä¹…é‡å®šå‘åˆ°testout<br><code>exec 3>./testfile</code> åˆ›å»ºå†™æè¿°ç¬¦3<br><code>exec 3>&-</code> å…³é—­æ–‡ä»¶æè¿°ç¬¦3<br><code>cat /dev/null > file.log</code> å¯å¿«é€Ÿæ¸…ç©ºæ—¥å¿—</p><h2 id=è„šæœ¬ä¸­æ‰§è¡Œæ•°å­¦è¿ç®—>è„šæœ¬ä¸­æ‰§è¡Œæ•°å­¦è¿ç®—<a hidden class=anchor aria-hidden=true href=#è„šæœ¬ä¸­æ‰§è¡Œæ•°å­¦è¿ç®—>#</a></h2><ol><li><p>ä½¿ç”¨ç¾å…ƒç¬¦å’Œæ–¹æ‹¬å·ï¼Œåªæ”¯æŒæ•´å‹è®¡ç®—<br><code>var1=$[1 + 5]</code><br><code>var2=$[$var1 * 2]</code><br><code>var3=$[2 / 3]</code></p></li><li><p>é€šè¿‡bcè¿›è¡Œæµ®ç‚¹å‹è®¡ç®—:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>var1</span><span class=o>=</span><span class=k>$(</span><span class=nb>echo</span> <span class=s2>&#34;scale=4; 3.44 / 5&#34;</span> <span class=p>|</span> bc<span class=k>)</span>  
</span></span><span class=line><span class=cl><span class=nv>var1</span><span class=o>=</span>10.46  
</span></span><span class=line><span class=cl><span class=nv>var2</span><span class=o>=</span>43.67  
</span></span><span class=line><span class=cl><span class=nv>var3</span><span class=o>=</span>33.2  
</span></span><span class=line><span class=cl><span class=nv>var4</span><span class=o>=</span><span class=m>71</span>  
</span></span><span class=line><span class=cl><span class=nv>var5</span><span class=o>=</span><span class=k>$(</span>bc<span class=s>&lt;&lt;EOF  
</span></span></span><span class=line><span class=cl><span class=s>scale = 4  
</span></span></span><span class=line><span class=cl><span class=s>a1=($var1 * $var2)  
</span></span></span><span class=line><span class=cl><span class=s>b1=($var3 * $var4)  
</span></span></span><span class=line><span class=cl><span class=s>a1+b1  
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>  
</span></span><span class=line><span class=cl><span class=k>)</span>  
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$var5</span><span class=s2>&#34;</span>  
</span></span></code></pre></div></li></ol><h2 id=é€€å‡ºè„šæœ¬>é€€å‡ºè„šæœ¬<a hidden class=anchor aria-hidden=true href=#é€€å‡ºè„šæœ¬>#</a></h2><p>é»˜è®¤æƒ…å†µshellä¼šä»¥è„šæœ¬æœ€åä¸€ä¸ªå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç é€€å‡º(0-255)<br>å¯ä»¥ä½¿ç”¨exitå‘½ä»¤æŒ‡å®šè„šæœ¬çš„é€€å‡ºç ï¼Œå¹¶é€šè¿‡<code>echo $?</code>æŸ¥çœ‹ç¨‹åºæ˜¯å¦æ‰§è¡ŒæˆåŠŸ</p><h2 id=ç»“æ„åŒ–å‘½ä»¤>ç»“æ„åŒ–å‘½ä»¤<a hidden class=anchor aria-hidden=true href=#ç»“æ„åŒ–å‘½ä»¤>#</a></h2><h3 id=ifè¯­å¥>ifè¯­å¥<a hidden class=anchor aria-hidden=true href=#ifè¯­å¥>#</a></h3><p>æ ¹æ®å‘½ä»¤æ‰§è¡Œæ˜¯å¦æˆåŠŸèµ°ä¸åŒåˆ†æ”¯</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>if</span> command1<span class=p>;</span> <span class=k>then</span>  
</span></span><span class=line><span class=cl> comands  
</span></span><span class=line><span class=cl><span class=k>elif</span> comand2<span class=p>;</span> <span class=k>then</span>  
</span></span><span class=line><span class=cl> comands  
</span></span><span class=line><span class=cl><span class=k>else</span>  
</span></span><span class=line><span class=cl> comands  
</span></span><span class=line><span class=cl><span class=k>fi</span>  
</span></span></code></pre></div><p>æˆ–è€…ä½¿ç”¨æ¡ä»¶æµ‹è¯•çš„æ–¹å¼</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> condition <span class=o>]</span><span class=p>;</span><span class=k>then</span>  
</span></span><span class=line><span class=cl> comands  
</span></span><span class=line><span class=cl><span class=k>fi</span>  
</span></span></code></pre></div><h3 id=æ¡ä»¶æµ‹è¯•>æ¡ä»¶æµ‹è¯•<a hidden class=anchor aria-hidden=true href=#æ¡ä»¶æµ‹è¯•>#</a></h3><ol><li><p>æ•°å€¼æ¯”è¾ƒ</p><table><thead><tr><th style=text-align:left>æ¯”è¾ƒ</th><th style=text-align:left>æè¿°</th></tr></thead><tbody><tr><td style=text-align:left>1 -eq n2 |</td><td style=text-align:left>æ£€æŸ¥ç›¸ç­‰ |</td></tr><tr><td style=text-align:left>1 -ge n2 |</td><td style=text-align:left>æ£€æŸ¥n1æ˜¯å¦å¤§äºæˆ–ç­‰äºn2 |</td></tr><tr><td style=text-align:left>1 -gt n2 |</td><td style=text-align:left>æ£€æŸ¥n1æ˜¯å¦å¤§äºn2 |</td></tr><tr><td style=text-align:left>1 -le n2 |</td><td style=text-align:left>æ£€æŸ¥n1æ˜¯å¦å°äºæˆ–ç­‰äºn2 |</td></tr><tr><td style=text-align:left>1 -lt n2 |</td><td style=text-align:left>æ£€æŸ¥n1æ˜¯å¦å°äºn2 |</td></tr><tr><td style=text-align:left>1 -ne n2 |</td><td style=text-align:left>æ£€æŸ¥n1æ˜¯å¦ä¸ç­‰äºn2 |</td></tr></tbody></table></li><li><p>å­—ç¬¦ä¸²æ¯”è¾ƒ</p><table><thead><tr><th style=text-align:left>æ¯”è¾ƒ</th><th style=text-align:left>æè¿°</th></tr></thead><tbody><tr><td style=text-align:left>tr1 = str2 |</td><td style=text-align:left>æ˜¯å¦ç›¸åŒ|</td></tr><tr><td style=text-align:left>tr1 != str2 |</td><td style=text-align:left>æ˜¯å¦ä¸åŒ|</td></tr><tr><td style=text-align:left>tr1 &lt; str2 |</td><td style=text-align:left>tr1æ˜¯å¦æ¯”str2å¤§|</td></tr><tr><td style=text-align:left>tr1 > str2 |</td><td style=text-align:left>tr1æ˜¯å¦æ¯”str2å°|</td></tr><tr><td style=text-align:left>n str1 |</td><td style=text-align:left>£€æŸ¥str1çš„é•¿åº¦æ˜¯å¦é0|</td></tr><tr><td style=text-align:left>z str1 |</td><td style=text-align:left>£€æŸ¥str1çš„é•¿åº¦æ˜¯å¦ä¸º0|</td></tr></tbody></table></li><li><p>æ–‡ä»¶æ¯”è¾ƒ</p><table><thead><tr><th style=text-align:left>æ¯”è¾ƒ</th><th style=text-align:left>æè¿°</th></tr></thead><tbody><tr><td style=text-align:left>d file |</td><td style=text-align:left>fileæ˜¯å¦å­˜åœ¨å¹¶æ˜¯ç›®å½•|</td></tr><tr><td style=text-align:left>e file |</td><td style=text-align:left>fileæ˜¯å¦å­˜åœ¨|</td></tr><tr><td style=text-align:left>f file |</td><td style=text-align:left>fileæ˜¯å¦å­˜åœ¨å¹¶æ˜¯æ–‡ä»¶|</td></tr><tr><td style=text-align:left>r file |</td><td style=text-align:left>æ˜¯å¦å­˜åœ¨å¹¶å¯è¯»|</td></tr><tr><td style=text-align:left>s file |</td><td style=text-align:left>æ˜¯å¦å­˜åœ¨å¹¶éç©º|</td></tr><tr><td style=text-align:left>w file |</td><td style=text-align:left>æ˜¯å¦å­˜åœ¨å¹¶å¯å†™|</td></tr><tr><td style=text-align:left>x file |</td><td style=text-align:left>æ˜¯å¦å­˜åœ¨å¹¶å¯æ‰§è¡Œ|</td></tr><tr><td style=text-align:left>O file |</td><td style=text-align:left>æ˜¯å¦å­˜åœ¨å¹¶å±äºå½“å‰ç”¨æˆ·æ‰€æœ‰|</td></tr><tr><td style=text-align:left>G file |</td><td style=text-align:left>æ˜¯å¦å­˜åœ¨å¹¶é»˜è®¤ç»„ä¸å½“å‰ç”¨æˆ·ç›¸åŒ|</td></tr><tr><td style=text-align:left>ile1 -nt file2 |</td><td style=text-align:left>file1æ˜¯å¦æ¯”file2æ–°|</td></tr><tr><td style=text-align:left>ile1 -ot file2 |</td><td style=text-align:left>file1æ˜¯å¦æ¯”file2æ—§|</td></tr></tbody></table></li><li><p>å¤åˆæ¡ä»¶æµ‹è¯•<br><code>[ conditon1 ] && [ condition2 ]</code><br><code>[ conditon1 ] || [ condition2 ]</code></p></li><li><p>ä½¿ç”¨åŒæ‹¬å·è¿›è¡Œæ•°å­¦è¿ç®—åˆ¤æ–­<br><code>(( expression ))</code>ï¼Œæ”¯æŒçš„è¿ç®—ç¬¦å·é™¤æ™®é€šè¿ç®—ç¬¦å¤–è¿˜åŒ…æ‹¬å¦‚ä¸‹ï¼Œå¤§äºå°äºç¬¦å·ä¸ç”¨è½¬ä¹‰ .
<code>val++</code> ã€<code>val--</code>ã€ <code>++val</code>ã€ <code>--val</code> ï¼šè‡ªå¢è‡ªå‡<br><code>!</code> :æ±‚å <code>~</code>:ä½æ±‚å <code>**</code>:å¹‚è¿ç®— <code>&lt;&lt;</code>ï¼šå·¦ä½ç§» <code>>></code>:å³ä½ç§» <code>&</code>:ä½å¸ƒå°”å’Œ<code>|</code>ï¼šä½å¸ƒå°”æˆ– <code>&&</code>ï¼šé€»è¾‘å’Œ <code>||</code>:é€»è¾‘æˆ–</p></li></ol><p>å¯ä»¥åœ¨ifè¯­å¥ä¸­ä½¿ç”¨åŒæ‹¬å·å‘½ä»¤ï¼Œä¹Ÿå¯ä»¥åœ¨è„šæœ¬ä¸­çš„æ™®é€šå‘½ä»¤é‡Œä½¿ç”¨æ¥èµ‹å€¼</p><ol start=6><li>ä½¿ç”¨åŒæ–¹æ‹¬å·è¿›è¡Œå­—ç¬¦ä¸²æ¯”è¾ƒ<br><code>[[ express ]]</code><br>bash shellæ”¯æŒæ¨¡å¼åŒ¹é…: <code>if [[ $USER == r* ]]</code></li></ol><h3 id=caseè¯­å¥>caseè¯­å¥<a hidden class=anchor aria-hidden=true href=#caseè¯­å¥>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>case</span> variable in  
</span></span><span class=line><span class=cl>pattern1 <span class=p>|</span> pattern2<span class=o>)</span> commands1<span class=p>;;</span>  
</span></span><span class=line><span class=cl>pattern3<span class=o>)</span> comands2<span class=p>;;</span>  
</span></span><span class=line><span class=cl>*<span class=o>)</span> default commands<span class=p>;;</span>  
</span></span><span class=line><span class=cl><span class=k>esac</span>  
</span></span></code></pre></div><h3 id=forè¯­å¥>forè¯­å¥<a hidden class=anchor aria-hidden=true href=#forè¯­å¥>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>for</span> var in list  
</span></span><span class=line><span class=cl><span class=k>do</span>  
</span></span><span class=line><span class=cl> commands:<span class=nv>$var</span>  
</span></span><span class=line><span class=cl><span class=k>done</span>  
</span></span></code></pre></div><p>æœ‰æ—¶å€™ä½¿ç”¨<code>for line in $(cat $file)</code>è¯»å–æ–‡æœ¬æ–‡ä»¶ï¼Œé»˜è®¤ä¼šä»¥ç©ºæ ¼åˆ†éš”è€Œä¸æ˜¯æ¢è¡Œç¬¦,éœ€è¦ä¿®æ”¹IFS.<br>IFSå€¼ï¼šå†…éƒ¨å­—æ®µåˆ†éš”ç¬¦</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>IFS.OLD<span class=o>=</span><span class=nv>$IFS</span>  
</span></span><span class=line><span class=cl><span class=nv>IFS</span><span class=o>=</span>$â€™<span class=se>\n</span>â€™  
</span></span><span class=line><span class=cl><span class=c1>#&lt;åœ¨ä»£ç ä¸­ä½¿ç”¨æ–°çš„IFSå€¼&gt;  </span>
</span></span><span class=line><span class=cl><span class=nv>IFS</span><span class=o>=</span><span class=nv>$IFS</span>.OLD  
</span></span></code></pre></div><p>Cè¯­è¨€é£æ ¼forè¯­å¥</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>for</span>  <span class=o>((</span> <span class=nv>i</span><span class=o>=</span>1<span class=p>;</span> i &lt;<span class=o>=</span>10<span class=p>;</span> i++ <span class=o>))</span>  
</span></span><span class=line><span class=cl><span class=k>do</span>  
</span></span><span class=line><span class=cl>...  
</span></span><span class=line><span class=cl><span class=k>done</span>  
</span></span></code></pre></div><h3 id=whileè¯­å¥>whileè¯­å¥<a hidden class=anchor aria-hidden=true href=#whileè¯­å¥>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>while</span> <span class=o>[</span> condition <span class=o>]</span>  
</span></span><span class=line><span class=cl><span class=k>do</span>  
</span></span><span class=line><span class=cl> other commands  
</span></span><span class=line><span class=cl><span class=k>done</span>  
</span></span></code></pre></div><p><code>break</code>: è·³å‡ºå†…éƒ¨å¾ªç¯<br><code>continue</code>: è·³è¿‡æœ¬æ¬¡å¾ªç¯<br><code>break n</code>: å¯è·³å‡ºå¤–éƒ¨å¾ªç¯<br><code>continue n</code> : ç»§ç»­å¾ªç¯å±‚çº§nçš„å¾ªç¯</p><h2 id=å¤„ç†ç”¨æˆ·è¾“å…¥>å¤„ç†ç”¨æˆ·è¾“å…¥<a hidden class=anchor aria-hidden=true href=#å¤„ç†ç”¨æˆ·è¾“å…¥>#</a></h2><p>åˆ©ç”¨getoptså¤„ç†ç”¨æˆ·è¾“å…¥å‚æ•°</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>while</span> <span class=nb>getopts</span> :ab:c opt  
</span></span><span class=line><span class=cl><span class=k>do</span>  
</span></span><span class=line><span class=cl> <span class=k>case</span> <span class=s2>&#34;</span><span class=nv>$opt</span><span class=s2>&#34;</span> in  
</span></span><span class=line><span class=cl>      a<span class=o>)</span> <span class=nb>echo</span> <span class=s2>&#34;found -a option&#34;</span> <span class=p>;;</span>  
</span></span><span class=line><span class=cl>      b<span class=o>)</span> <span class=nb>echo</span> <span class=s2>&#34;found -b option ,with value </span><span class=nv>$OPTARG</span><span class=s2>&#34;</span> <span class=p>;;</span>  
</span></span><span class=line><span class=cl>      c<span class=o>)</span> <span class=nb>echo</span> <span class=s2>&#34;found -c option&#34;</span> <span class=p>;;</span>  
</span></span><span class=line><span class=cl>      *<span class=o>)</span> <span class=nb>echo</span> <span class=s2>&#34;Unknown option: </span><span class=nv>$opt</span><span class=s2>&#34;</span> <span class=p>;;</span>  
</span></span><span class=line><span class=cl>      <span class=k>esac</span>  
</span></span><span class=line><span class=cl><span class=k>done</span>  
</span></span><span class=line><span class=cl><span class=nb>shift</span> $<span class=o>[</span> <span class=nv>$OPTIND</span> - <span class=m>1</span> <span class=o>]</span>  
</span></span><span class=line><span class=cl><span class=nv>count</span><span class=o>=</span><span class=m>1</span>  
</span></span><span class=line><span class=cl><span class=k>for</span> param in <span class=s2>&#34;</span><span class=nv>$@</span><span class=s2>&#34;</span>  
</span></span><span class=line><span class=cl><span class=k>do</span>  
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Parameter </span><span class=nv>$count</span><span class=s2>: </span><span class=nv>$param</span><span class=s2>&#34;</span>  
</span></span><span class=line><span class=cl>    <span class=nv>count</span><span class=o>=</span>$<span class=o>[</span> <span class=nv>$count</span> + 1<span class=o>]</span>  
</span></span><span class=line><span class=cl><span class=k>done</span>  
</span></span></code></pre></div><p>è·å–ç”¨æˆ·è¾“å…¥</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>if</span> <span class=nb>read</span> -t <span class=m>10</span> -p <span class=s2>&#34;Please enter your name: &#34;</span> name  
</span></span><span class=line><span class=cl><span class=k>then</span>  
</span></span><span class=line><span class=cl> <span class=nb>echo</span> <span class=s2>&#34;ok: </span><span class=nv>$name</span><span class=s2>&#34;</span>  
</span></span><span class=line><span class=cl><span class=k>else</span>  
</span></span><span class=line><span class=cl> <span class=nb>echo</span> <span class=s2>&#34;too slow&#34;</span>  
</span></span><span class=line><span class=cl> <span class=nb>exit</span> <span class=m>1</span>  
</span></span><span class=line><span class=cl><span class=k>fi</span>  
</span></span></code></pre></div><h2 id=ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶>ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶<a hidden class=anchor aria-hidden=true href=#ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>tempfile</span><span class=o>=</span><span class=k>$(</span>mktemp tmp.XXXXXX<span class=k>)</span>  
</span></span><span class=line><span class=cl><span class=nb>exec</span> 3&gt;<span class=nv>$tempfile</span>  
</span></span><span class=line><span class=cl><span class=nb>echo</span> â€œtestâ€ &gt;<span class=p>&amp;</span><span class=m>3</span>  
</span></span><span class=line><span class=cl><span class=nb>exec</span> 3&gt;<span class=p>&amp;</span>-  
</span></span><span class=line><span class=cl>rm -f <span class=nv>$tempfile</span> 2&gt;/dev/null  
</span></span><span class=line><span class=cl>mktemp -t ç”Ÿæˆåœ¨/tmp/ç›®å½•ä¸‹ï¼Œè¿”å›å…¨è·¯å¾„  
</span></span></code></pre></div><h2 id=æ§åˆ¶è„šæœ¬>æ§åˆ¶è„šæœ¬<a hidden class=anchor aria-hidden=true href=#æ§åˆ¶è„šæœ¬>#</a></h2><ol><li><p>è®°å½•æ¶ˆæ¯<br><code>date | tee -a testfile</code></p></li><li><p>trapæ•è·å¤„ç†ä¿¡å·</p></li></ol><p><code>trap commands signals</code><br><code>trap â€œecho â€˜ sorry i have trapped Ctrl-Câ€™â€ SIGINT</code><br><code>trap -- SIGINT</code> åˆ é™¤æ•è·</p><ol start=3><li>åå°ä½œä¸šç›¸å…³<br><code>command &</code>ï¼šåå°è¿è¡Œ<br><code>nohup comand</code>: åå°è¿è¡Œ<br><code>jobs</code>: åˆ—ä¸¾ä½œä¸š<br><code>bg</code>: åå°é‡å¯ä½œä¸š<br><code>fg</code>: å°†åå°ä½œä¸šè°ƒåˆ°å‰å°ç»§ç»­æ‰§è¡Œ,å¯æŒ‡å®šjobå·<br><code>nice renice</code>: è°ƒæ•´ä½œä¸šä¼˜å…ˆçº§<br><code>at</code>: å®šæ—¶æ‰§è¡Œä½œä¸š<br><code>atq</code>: å®šæ—¶ä½œä¸šé˜Ÿåˆ—<br><code>atrm</code>: åˆ é™¤ä½œä¸š<br><code>crontab</code>å®šæ—¶ä»»åŠ¡æ—¶é—´è¡¨ï¼š<br>min hour dayofmonth month dayofweek command<br><code>anacron</code>:å¼€æœºæ‰§è¡Œé”™è¿‡ä½œä¸š</li></ol><h3 id=shellå‡½æ•°>shellå‡½æ•°<a hidden class=anchor aria-hidden=true href=#shellå‡½æ•°>#</a></h3><ul><li>å‡½æ•°åå¿…é¡»å”¯ä¸€ï¼Œå¦åˆ™ä¼šæœ‰é—®é¢˜</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>function</span> name<span class=o>{</span>  
</span></span><span class=line><span class=cl> commands  
</span></span><span class=line><span class=cl><span class=o>}</span>  
</span></span><span class=line><span class=cl><span class=c1>#æˆ–è€…  </span>
</span></span><span class=line><span class=cl>name<span class=o>()</span> <span class=o>{</span>  
</span></span><span class=line><span class=cl> commands  
</span></span><span class=line><span class=cl><span class=o>}</span>  
</span></span></code></pre></div><ul><li><p>return å¯ä»¥è¿”å›å‡½æ•°å€¼ï¼šå¿…é¡»å‡½æ•°ä¸€ç»“æŸå°±å–<code>$?</code>;é€€å‡ºçš„çŠ¶æ€ç å¿…é¡»æ˜¯0-255</p></li><li><p>è¶…å‡º255å€¼å¯ä»¥ä½¿ç”¨ <code>result=$(func1)</code> æ–¹å¼</p></li><li><p>æ¯ä¸ªå‡½æ•°å¯ä»¥å•ç‹¬ä½¿ç”¨è‡ªå·±çš„<code>$# $1 $2</code> ç¯å¢ƒå‚æ•°</p></li><li><p>å˜é‡ä½œç”¨åŸŸï¼š</p></li><li><p>å…¨å±€å˜é‡ï¼šä¸ç®¡åœ¨å‡½æ•°å†…å¤–å®šä¹‰ï¼Œè„šæœ¬æ‰€æœ‰ä½ç½®éƒ½å¯è®¿é—®</p></li><li><p>å±€éƒ¨å˜é‡ï¼šå¿…é¡»ç”¨<code>local</code>å…³é”®å­—æ˜¾å¼å£°æ˜<br><code>local temp=$[ $value + 5]</code></p></li></ul><p>æ•°ç»„ç›¸å…³ï¼š<br>å‡½æ•°å‚æ•°æ˜¯æ•°ç»„æƒ…å†µå¤„ç†ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>function</span> testit <span class=o>{</span>  
</span></span><span class=line><span class=cl> <span class=nb>local</span> newarray  
</span></span><span class=line><span class=cl> <span class=nv>newarray</span><span class=o>=(</span><span class=s1>&#39;echo &#34;$@&#34;&#39;</span><span class=o>)</span>  
</span></span><span class=line><span class=cl> <span class=nb>echo</span> â€œThe new array value is: <span class=si>${</span><span class=nv>newarray</span><span class=p>[*]</span><span class=si>}</span>â€  
</span></span><span class=line><span class=cl><span class=o>}</span>  
</span></span><span class=line><span class=cl><span class=nv>myarray</span><span class=o>=(</span><span class=m>1</span> <span class=m>2</span> <span class=m>3</span> <span class=m>4</span> 5<span class=o>)</span>  
</span></span><span class=line><span class=cl>testit <span class=si>${</span><span class=nv>myarray</span><span class=p>[*]</span><span class=si>}</span>  
</span></span></code></pre></div><h2 id=å·¥å…·æ¨è>å·¥å…·æ¨è<a hidden class=anchor aria-hidden=true href=#å·¥å…·æ¨è>#</a></h2><p><a href=ftp://ftp.gnu.org/gnu/shtool/>shtool</a><br><a href=https://github.com/koalaman/shellcheck>ShellCheck</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://zhxin.xyz/tags/shell/>shell</a></li></ul><nav class=paginav><a class=next href=https://zhxin.xyz/post/pg_state_change_code/><span class=title>ä¸‹ä¸€é¡µ Â»</span><br><span>PG Peeringè¿‡ç¨‹çŠ¶æ€å˜åŒ–ä»£ç èµ°è¯»</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://zhxin.xyz/>zhxin.xyz</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="å¤åˆ¶";function s(){t.innerHTML="å·²å¤åˆ¶ï¼",setTimeout(()=>{t.innerHTML="å¤åˆ¶"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>