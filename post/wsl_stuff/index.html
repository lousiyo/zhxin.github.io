<!DOCTYPE html>
<html lang="zh-cn"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   <meta name="description" content="wsl介绍 Windows Subsystem for Linux 允许在Windows上直接运行GNU/Linux环境，包括大多数命令行工具、实用程序和应用程序，而无需传统虚拟机或双启动设">  

  <title>
    
      WSL
    
  </title>


  <link rel="shortcut icon" type="image/x-icon" href="/" />
  
  
  
  <link rel="stylesheet" href="/css/main.c5af9bae99b4a3d315b9f39305ffff27e9c3383fbbfd8b5fcaf2237667021a333a982fb958d1813a720b0a660b14022337553ae1ca93ef2ee17c4ae628ac19cb.css" integrity="sha512-xa&#43;brpm0o9MVufOTBf//J&#43;nDOD&#43;7/YtfyvIjdmcCGjM6mC&#43;5WNGBOnILCmYLFAIjN1U64cqT7y7hfErmKKwZyw==" />
  
</head>
<body a="light">
        <main class="page-content" aria-label="Content">
            <div class="w">
<a href="/">返回</a>


<article>
    <p class="post-meta">
        <time datetime="2023-06-09 17:29:59 &#43;0800 CST">
            2023-06-09
        </time>
    </p>

    <h1>WSL</h1>

    

    <h1 id="wsl介绍">wsl介绍</h1>
<p>Windows Subsystem for Linux 允许在Windows上直接运行GNU/Linux环境，包括大多数命令行工具、实用程序和应用程序，而无需传统虚拟机或双启动设置的开销。
WSL2是Windows子系统的新版本，它采用了全新的架构，使得Windows子系统能够在Windows上运行ELF64 Linux二进制文件。其主要目标是提高文件系统性能，并增加完整的系统调用兼容性。这种新架构改变了Linux二进制文件与Windows及计算机硬件交互的方式，但仍然提供与WSL 1（当前广泛可用版本）相同的用户体验。每个Linux发行版都可以使用WSL 1或WSL 2架构运行。</p>
<h1 id="安装">安装</h1>
<p>必须运行 Windows 10 版本2004及更高版本（Build 19041及更高版本）或Windows 11才能使用以下命令。使用管理员身份打开cmd或者powershell，执行wsl &ndash;install命令，将默认安装Ubuntu发行版。
wsl &ndash;list &ndash;online 查看可用的发行版
wsl &ndash;install -d <!-- raw HTML omitted --> 安装指定的发行版
wsl &ndash;list &ndash;running 查看正在运行的wsl
wsl &ndash;shutdown 关闭所有wsl</p>
<h1 id="支持systemd">支持systemd</h1>
<p>wsl &ndash;version 查看wsl版本，只有0.67.6+可以支持开启。在wsl中/etc/wsl.conf文件中添加systemd = true，重启wsl开启systemd支持。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>[network]
</span></span><span style="display:flex;"><span><span style="color:#00688b">hostname</span> = Ubuntu
</span></span><span style="display:flex;"><span><span style="color:#00688b">generateHosts</span> = <span style="color:#658b00">false</span>
</span></span><span style="display:flex;"><span>[boot]
</span></span><span style="display:flex;"><span><span style="color:#00688b">systemd</span> = <span style="color:#658b00">true</span>
</span></span></code></pre></div><h1 id="wslconfig">.wslconfig</h1>
<p>.wslconfig文件为WSL 2中运行的所有Linux发行版全局配置设置。</p>
<table>
<thead>
<tr>
<th>配置项</th>
<th>含意</th>
</tr>
</thead>
<tbody>
<tr>
<td>memory</td>
<td>分配给wsl2 vm的内存</td>
</tr>
<tr>
<td>processors</td>
<td>分配给wsl2 vm的CPU核数</td>
</tr>
</tbody>
</table>
<p>例子:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>[wsl2]
</span></span><span style="display:flex;"><span><span style="color:#00688b">memory</span>=4GB
</span></span><span style="display:flex;"><span><span style="color:#00688b">processors</span>=<span style="color:#b452cd">2</span>
</span></span></code></pre></div><h1 id="升级wsl2">升级wsl2</h1>
<p>查看当前版本</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>$ wsl.exe -l -v
</span></span><span style="display:flex;"><span>  NAME      STATE           VERSION
</span></span><span style="display:flex;"><span>* Ubuntu    Running         <span style="color:#b452cd">2</span>
</span></span></code></pre></div><p>执行wsl &ndash;set-version <!-- raw HTML omitted --> 2 修改已安装的发行版到V2.</p>
<h1 id="导出导入">导出导入</h1>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>wsl --export &lt;Distribution Name&gt; &lt;FileName&gt;
</span></span><span style="display:flex;"><span>wsl --import &lt;Distribution Name&gt; &lt;InstallLocation&gt; &lt;FileName&gt;
</span></span></code></pre></div><p>Ref: <a href="https://learn.microsoft.com/en-us/windows/wsl/">官方文档</a></p>

</article>

            </div>
        </main>
    </body>
</html>
